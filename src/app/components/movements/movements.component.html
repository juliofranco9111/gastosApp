<app-loading *ngIf="loading" class="animated fadeIn"></app-loading>
<div class="container">

    <div *ngIf="!loading && !data" class="alert alert-info text-center animated fadeIn">
        <h1>
            No hay movimientos a√∫n...
        </h1>
    </div>
</div>

<div *ngIf="!loading" class="text-center mb-4 animated fadeIn">
    <a routerLink="/new" class="btn btn-primary text-white">
        <i class="fa fa-plus"></i>
        Nuevo movimiento
    </a>
</div>

<div *ngIf="!loading && data" class="row animated fadeIn">
    <div class="mx-auto">



        <div class="card">
            <div class="card-body">

                <table class="table">
                    <thead>
                        <tr>

                            <th scope="col">Categoria</th>
                            <th scope="col">Ingresos</th>
                            <th scope="col">Gastos</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let movement of movements">


                            <!-- <td>
                                <a *ngIf="!edit" (click)="click()" class="editable editable-click cursor"
                                    style="color: rgb(152, 166, 173);">
                                    {{ info.symbol }}
                                </a>

                                <input class="form-control" *ngIf="edit" [(ngModel)]="info.symbol"
                                    (keyup.enter)="saveChanges()" type="text" name="symbol" id="">
                            </td> -->

                            <td> 
                                <!-- <input class="form-control" (keyup.enter)="updateMovement()" type="text" [value]="movement.category"> -->  
                                
                                <a *ngIf="!edit" (click)="click()" class="editable editable-click cursor"
                                    style="color: rgb(152, 166, 173);">
                                    {{ movement.category }}
                                </a>

                                <input class="form-control" *ngIf="edit" [value]="movement.category"
                                    (keyup.enter)="updateMovement( movement )" type="text" name="symbol" id="">

                            </td>
                            <td *ngIf="movement.type === 'gasto'"></td>
                            <td *ngIf="movement.type === 'ingreso'">
                                <a *ngIf="!edit" (click)="click()" class="editable editable-click cursor"
                                    style="color: rgb(152, 166, 173);">
                                    {{ infoService.symbol }} {{ movement.amount }}
                                </a>

                                <input class="form-control" *ngIf="edit" [value]="movement.amount"
                                    (keyup.enter)="updateMovement( movement )" type="text" name="symbol" id="">
                            </td>
                            <td *ngIf="movement.type === 'ingreso'"></td>
                            <td *ngIf="movement.type === 'gasto'">
                                <a *ngIf="!edit" (click)="click()" class="editable editable-click cursor"
                                    style="color: rgb(152, 166, 173);">
                                    {{ infoService.symbol }} {{ movement.amount }}
                                </a>

                                <input class="form-control" *ngIf="edit" [value]="movement.amount"
                                    (keyup.enter)="updateMovement( movement )" type="text" name="symbol" id="">
                            </td>
                        </tr>



                        <tr>

                            <th scope="col">Total</th>
                            <th scope="col"> {{ infoService.symbol }} {{ totalEarnings }}</th>
                            <th scope="col">{{ infoService.symbol }} {{ totalExpenses }}</th>
                        </tr>



                    </tbody>
                </table>





            </div>


        </div>
    </div>
</div>



<div *ngIf="!loading && data" class="card bg-success text-white mx-auto col-sm-4 animated fadeIn">
    <div class="card-body">
        <div class="d-block">
            <div class="stats">
                <h3 class="text-white text-center">Balance</h3>
                <h1 class="mx-auto text-white text-center">{{ infoService.symbol }} {{ balance }}</h1>
            </div>

        </div>
    </div>
</div>